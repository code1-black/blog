<% content_for :title, "Showing post" %>

<div class="md:w-2/3 w-full">
  <% if notice.present? %>
    <p class="py-2 px-3 bg-green-50 mb-5 text-green-500 font-medium rounded-md inline-block" id="notice"><%= notice %></p>
  <% end %>

  <h1 class="font-bold text-4xl">Showing post</h1>

  <%= render @post %>
  div class="mt-8">
  <h2 class="text-2xl font-bold mb-4">Comments</h2>
  <div id="comments">
    <%= render @post.comments %>
  </div>

  <% if user_signed_in? %>
    <%= form_with(model: [@post, Comment.new], data: { turbo_stream: true }, class: "mt-4") do |form| %>
      <div class="mb-2">
        <%= form.text_area :body, placeholder: "Write a comment...", class: "w-full p-2 rounded border" %>
      </div>
      <%= form.submit "Add Comment", class: "bg-blue-500 text-white px-4 py-2 rounded" %>
    <% end %>
  <% else %>
    <p class="text-gray-500">You must be logged in to comment.</p>
  <% end %>
</div>
<% if current_admin %>
  <%= link_to "Edit this post", edit_post_path(@post), class: "w-full sm:w-auto text-center rounded-md px-3.5 py-2.5 bg-gray-100 hover:bg-gray-50 inline-block font-medium" %>
  <%= link_to "Back to posts", posts_path, class: "w-full sm:w-auto text-center mt-2 sm:mt-0 sm:ml-2 rounded-md px-3.5 py-2.5 bg-gray-100 hover:bg-gray-50 inline-block font-medium" %>
  <%= button_to "Destroy this post", @post, method: :delete, form_class: "sm:inline-block mt-2 sm:mt-0 sm:ml-2", class: "w-full rounded-md px-3.5 py-2.5 text-white bg-red-600 hover:bg-red-500 font-medium cursor-pointer", data: { turbo_confirm: "Are you sure?" } %>
  <%end %>
</div>
